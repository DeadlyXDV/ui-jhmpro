<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Booking Servis - JHMPRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "primary-blue": "#1E3A8A",
              "secondary-blue": "#3B82F6",
              "light-blue": "#EFF6FF",
              "success-green": "#10B981",
              "warning-orange": "#F59E0B",
              "danger-red": "#EF4444",
              "gray-primary": "#374151",
              "gray-secondary": "#6B7280",
              "gray-heading": "#1F2937",
              "gray-bg": "#F9FAFB",
            },
            fontFamily: {
              inter: ["Inter", "system-ui", "sans-serif"],
            },
          },
        },
      };
    </script>
  </head>
  <body class="font-inter bg-gray-bg">
    <!-- Header -->
    <header class="bg-white shadow-sm">
      <nav class="container mx-auto px-4 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center space-x-4">
            <a
              href="#"
              onclick="logoutUser(); return false;"
              class="w-8 h-8 bg-primary-blue rounded-lg flex items-center justify-center"
            >
              <span class="text-white font-bold text-sm">JH</span>
            </a>
            <span class="font-bold text-lg text-gray-heading">JHMPRO</span>
          </div>
          <div class="flex items-center space-x-4">
            <a
              href="dashboard-customer.html"
              class="text-secondary-blue hover:text-primary-blue"
              >Dashboard</a
            >
            <div class="relative">
              <button
                id="profile-dropdown"
                class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200"
              >
                <img
                  src="https://via.placeholder.com/32x32"
                  alt="User"
                  class="w-8 h-8 rounded-full"
                />
                <span class="text-sm font-medium text-gray-primary"
                  >John Doe</span
                >
                <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
              </button>

              <!-- Dropdown Menu -->
              <div
                id="profile-menu"
                class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 hidden z-50"
              >
                <div class="py-2">
                  <a
                    href="#"
                    class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200"
                  >
                    <i class="fas fa-user text-gray-400 mr-3"></i>
                    Profil
                  </a>
                  <a
                    href="#"
                    class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200"
                  >
                    <i class="fas fa-cog text-gray-400 mr-3"></i>
                    Pengaturan
                  </a>
                  <hr class="my-2 border-gray-200" />
                  <a
                    href="#"
                    onclick="logoutUser(); return false;"
                    class="flex items-center px-4 py-2 text-sm text-danger-red hover:bg-red-50 transition-colors duration-200"
                  >
                    <i class="fas fa-sign-out-alt text-danger-red mr-3"></i>
                    Keluar
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <div class="container mx-auto px-4 lg:px-8 py-8">
      <!-- Progress Steps -->
      <div class="mb-8">
        <div class="flex items-center justify-between max-w-4xl mx-auto">
          <!-- Step 1 -->
          <div class="flex items-center">
            <div
              class="w-10 h-10 bg-primary-blue rounded-full flex items-center justify-center text-white font-semibold"
            >
              1
            </div>
            <span class="ml-3 text-primary-blue font-medium">Info Motor</span>
          </div>
          <div class="flex-1 h-1 bg-primary-blue mx-4"></div>

          <!-- Step 2 -->
          <div class="flex items-center">
            <div
              class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-semibold"
            >
              2
            </div>
            <span class="ml-3 text-gray-secondary font-medium"
              >Pilih Layanan</span
            >
          </div>
          <div class="flex-1 h-1 bg-gray-300 mx-4"></div>

          <!-- Step 3 -->
          <div class="flex items-center">
            <div
              class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-semibold"
            >
              3
            </div>
            <span class="ml-3 text-gray-secondary font-medium">Jadwal</span>
          </div>
          <div class="flex-1 h-1 bg-gray-300 mx-4"></div>

          <!-- Step 4 -->
          <div class="flex items-center">
            <div
              class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-semibold"
            >
              4
            </div>
            <span class="ml-3 text-gray-secondary font-medium">Konfirmasi</span>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Form Container -->
        <div class="lg:col-span-2">
          <div class="bg-white rounded-2xl p-10 shadow-md">
            <h2 class="text-2xl font-semibold text-gray-heading mb-8">
              Informasi Motor Anda
            </h2>

            <form class="space-y-6">
              <!-- Vehicle Type -->
              <div>
                <label class="block text-sm font-medium text-gray-primary mb-2"
                  >Jenis Motor</label
                >
                <select
                  class="w-full h-12 px-4 border-2 border-gray-200 rounded-lg focus:border-secondary-blue focus:ring-2 focus:ring-blue-100 transition-all duration-200"
                >
                  <option value="">Pilih jenis motor</option>
                  <option value="matic">Motor Matic</option>
                  <option value="sport">Motor Sport</option>
                  <option value="bebek">Motor Bebek</option>
                  <option value="trail">Motor Trail</option>
                </select>
              </div>

              <!-- Brand -->
              <div>
                <label class="block text-sm font-medium text-gray-primary mb-2"
                  >Merek Motor</label
                >
                <select
                  class="w-full h-12 px-4 border-2 border-gray-200 rounded-lg focus:border-secondary-blue focus:ring-2 focus:ring-blue-100 transition-all duration-200"
                >
                  <option value="">Pilih merek motor</option>
                  <option value="honda">Honda</option>
                  <option value="yamaha">Yamaha</option>
                  <option value="suzuki">Suzuki</option>
                  <option value="kawasaki">Kawasaki</option>
                  <option value="tvs">TVS</option>
                  <option value="benelli">Benelli</option>
                </select>
              </div>

              <!-- Model -->
              <div>
                <label class="block text-sm font-medium text-gray-primary mb-2"
                  >Model Motor</label
                >
                <input
                  type="text"
                  placeholder="Contoh: Vario, NMAX, Beat, PCX"
                  class="w-full h-12 px-4 border-2 border-gray-200 rounded-lg focus:border-secondary-blue focus:ring-2 focus:ring-blue-100 transition-all duration-200 placeholder-gray-400"
                />
              </div>

              <!-- Year -->
              <div>
                <label class="block text-sm font-medium text-gray-primary mb-2"
                  >Tahun</label
                >
                <select
                  class="w-full h-12 px-4 border-2 border-gray-200 rounded-lg focus:border-secondary-blue focus:ring-2 focus:ring-blue-100 transition-all duration-200"
                >
                  <option value="">Pilih tahun</option>
                  <option value="2024">2024</option>
                  <option value="2023">2023</option>
                  <option value="2022">2022</option>
                  <option value="2021">2021</option>
                  <option value="2020">2020</option>
                  <option value="2019">2019</option>
                  <option value="2018">2018</option>
                </select>
              </div>

              <!-- License Plate -->
              <div>
                <label class="block text-sm font-medium text-gray-primary mb-2"
                  >Nomor Polisi</label
                >
                <input
                  type="text"
                  placeholder="Contoh: B 1234 XYZ"
                  class="w-full h-12 px-4 border-2 border-gray-200 rounded-lg focus:border-secondary-blue focus:ring-2 focus:ring-blue-100 transition-all duration-200 placeholder-gray-400"
                />
              </div>

              <!-- Odometer -->
              <div>
                <label class="block text-sm font-medium text-gray-primary mb-2"
                  >Kilometer Saat Ini</label
                >
                <input
                  type="number"
                  placeholder="Contoh: 45000"
                  class="w-full h-12 px-4 border-2 border-gray-200 rounded-lg focus:border-secondary-blue focus:ring-2 focus:ring-blue-100 transition-all duration-200 placeholder-gray-400"
                />
                <p class="text-sm text-gray-secondary mt-1">
                  Masukkan angka dalam kilometer
                </p>
              </div>

              <!-- Problem Description -->
              <div>
                <label class="block text-sm font-medium text-gray-primary mb-2"
                  >Keluhan atau Masalah (Opsional)</label
                >
                <textarea
                  rows="4"
                  placeholder="Jelaskan keluhan atau masalah yang dialami motor Anda..."
                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-secondary-blue focus:ring-2 focus:ring-blue-100 transition-all duration-200 placeholder-gray-400 resize-none"
                ></textarea>
              </div>

              <!-- Action Buttons -->
              <div class="flex justify-between pt-6">
                <a
                  href="dashboard-customer.html"
                  class="px-8 py-3 border-2 border-gray-300 text-gray-primary rounded-lg hover:bg-gray-50 transition-colors duration-200 text-center"
                >
                  Kembali
                </a>
                <button
                  type="button"
                  id="next-step"
                  class="px-8 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-900 transition-colors duration-200"
                >
                  Lanjutkan
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Summary Sidebar -->
        <div class="lg:col-span-1">
          <div
            class="bg-gray-bg border border-gray-200 rounded-xl p-6 sticky top-8"
          >
            <h3 class="text-lg font-semibold text-gray-heading mb-4">
              Ringkasan Booking
            </h3>

            <!-- Vehicle Info -->
            <div class="space-y-3 mb-6">
              <div class="flex justify-between text-sm">
                <span class="text-gray-secondary">Motor:</span>
                <span class="text-gray-primary">-</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-secondary">Nomor Polisi:</span>
                <span class="text-gray-primary">-</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-secondary">Layanan:</span>
                <span class="text-gray-primary">-</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-secondary">Tanggal:</span>
                <span class="text-gray-primary">-</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-secondary">Waktu:</span>
                <span class="text-gray-primary">-</span>
              </div>
            </div>

            <div class="border-t border-gray-300 pt-4">
              <div class="flex justify-between text-sm mb-2">
                <span class="text-gray-secondary">Estimasi Biaya:</span>
                <span class="text-gray-primary">-</span>
              </div>
              <div class="flex justify-between text-sm mb-2">
                <span class="text-gray-secondary">Estimasi Waktu:</span>
                <span class="text-gray-primary">-</span>
              </div>
              <div class="flex justify-between font-semibold text-lg">
                <span class="text-gray-heading">Total:</span>
                <span class="text-primary-blue">Rp 0</span>
              </div>
            </div>

            <!-- Info Box -->
            <div class="mt-6 p-4 bg-light-blue rounded-lg">
              <div class="flex items-start space-x-3">
                <i class="fas fa-info-circle text-secondary-blue mt-1"></i>
                <div>
                  <h4 class="text-sm font-medium text-gray-heading mb-1">
                    Informasi Penting
                  </h4>
                  <p class="text-xs text-gray-secondary">
                    • Harga yang ditampilkan adalah estimasi<br />
                    • Harga final akan dikonfirmasi setelah pemeriksaan<br />
                    • Booking dapat dibatalkan H-1
                  </p>
                </div>
              </div>
            </div>

            <!-- Contact Info -->
            <div class="mt-6 p-4 bg-white rounded-lg border">
              <h4 class="text-sm font-semibold text-gray-heading mb-3">
                Butuh Bantuan?
              </h4>
              <div class="space-y-2">
                <div class="flex items-center space-x-2 text-sm">
                  <i class="fas fa-phone text-secondary-blue"></i>
                  <span class="text-gray-primary">+62 21 1234 5678</span>
                </div>
                <div class="flex items-center space-x-2 text-sm">
                  <i class="fas fa-envelope text-secondary-blue"></i>
                  <span class="text-gray-primary">support@jhmpro.com</span>
                </div>
                <div class="flex items-center space-x-2 text-sm">
                  <i class="fab fa-whatsapp text-success-green"></i>
                  <span class="text-gray-primary">WhatsApp Support</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Load pre-filled vehicle data if available
      function loadVehicleData() {
        const vehicleInfo = localStorage.getItem("vehicleInfo");
        const licensePlate = localStorage.getItem("licensePlate");
        const vehicleType = localStorage.getItem("vehicleType");
        const vehicleBrand = localStorage.getItem("vehicleBrand");
        const vehicleModel = localStorage.getItem("vehicleModel");
        const vehicleYear = localStorage.getItem("vehicleYear");
        const vehicleOdometer = localStorage.getItem("vehicleOdometer");

        if (vehicleInfo && licensePlate) {
          // Pre-fill form fields
          const typeSelect = document.querySelector("select");
          const brandSelect = document.querySelectorAll("select")[1];
          const modelInput = document.querySelector(
            'input[placeholder*="Vario"]'
          );
          const yearSelect = document.querySelectorAll("select")[2];
          const plateInput = document.querySelector(
            'input[placeholder*="B 1234"]'
          );
          const odometerInput = document.querySelector('input[type="number"]');

          if (typeSelect && vehicleType) {
            typeSelect.value = vehicleType;
          }
          if (brandSelect && vehicleBrand) {
            brandSelect.value = vehicleBrand;
          }
          if (modelInput && vehicleModel) {
            modelInput.value = vehicleModel;
          }
          if (yearSelect && vehicleYear) {
            yearSelect.value = vehicleYear;
          }
          if (plateInput && licensePlate) {
            plateInput.value = licensePlate;
          }
          if (odometerInput && vehicleOdometer) {
            odometerInput.value = vehicleOdometer;
          }

          // Update summary
          updateSummary();
        }
      }

      // Form validation and step progression
      document
        .getElementById("next-step")
        .addEventListener("click", function () {
          // Basic validation
          const vehicleType = document.querySelector("select").value;
          const brand = document.querySelectorAll("select")[1].value;
          const model = document.querySelector(
            'input[placeholder*="Vario"]'
          ).value;
          const licensePlate = document.querySelector(
            'input[placeholder*="B 1234"]'
          ).value;

          if (!vehicleType || !brand || !model || !licensePlate) {
            alert("Mohon lengkapi informasi motor yang diperlukan");
            return;
          }

          // Save vehicle information to localStorage
          const year = document.querySelectorAll("select")[2].value;
          const odometer = document.querySelector('input[type="number"]').value;
          const complaint = document.querySelector("textarea").value;

          // Save to localStorage
          localStorage.setItem("vehicleInfo", `${brand} ${model} ${year}`);
          localStorage.setItem("licensePlate", licensePlate);
          localStorage.setItem("vehicleType", vehicleType);
          localStorage.setItem("vehicleBrand", brand);
          localStorage.setItem("vehicleModel", model);
          localStorage.setItem("vehicleYear", year);
          localStorage.setItem("vehicleOdometer", odometer);
          localStorage.setItem("vehicleComplaint", complaint);

          // Navigate to step 2
          window.location.href = "booking-service-step2.html";
        });

      function updateSummary() {
        // Update summary sidebar with current form data
        const brand = document.querySelectorAll("select")[1].value;
        const model = document.querySelector(
          'input[placeholder*="Vario"]'
        ).value;
        const year = document.querySelectorAll("select")[2].value;
        const licensePlate = document.querySelector(
          'input[placeholder*="B 1234"]'
        ).value;

        const vehicleInfo =
          brand && model ? `${brand} ${model} ${year}`.trim() : "-";

        // Update summary fields (you might need to add IDs to these elements)
        const summaryElements = document.querySelectorAll(".text-gray-primary");
        if (summaryElements.length >= 2) {
          summaryElements[0].textContent = vehicleInfo;
          summaryElements[1].textContent = licensePlate || "-";
        }
      }

      // Auto-format license plate input
      document
        .querySelector('input[placeholder*="B 1234"]')
        .addEventListener("input", function (e) {
          let value = e.target.value.toUpperCase();
          // Basic formatting for Indonesian license plates
          value = value.replace(/[^A-Z0-9\s]/g, "");
          e.target.value = value;
          updateSummary();
        });

      // Real-time form updates
      document
        .querySelectorAll("input, select, textarea")
        .forEach((element) => {
          element.addEventListener("change", function () {
            // Update summary sidebar in real-time
            updateSummary();
          });
        });

      // Load vehicle data when page loads
      document.addEventListener("DOMContentLoaded", function () {
        loadVehicleData();
      });

      // Profile dropdown functionality
      const profileDropdown = document.getElementById("profile-dropdown");
      const profileMenu = document.getElementById("profile-menu");

      function toggleProfileMenu() {
        profileMenu.classList.toggle("hidden");
      }

      function hideProfileMenu() {
        profileMenu.classList.add("hidden");
      }

      profileDropdown.addEventListener("click", (e) => {
        e.stopPropagation();
        toggleProfileMenu();
      });

      // Close dropdown when clicking outside
      document.addEventListener("click", (e) => {
        if (
          !profileDropdown.contains(e.target) &&
          !profileMenu.contains(e.target)
        ) {
          hideProfileMenu();
        }
      });

      // Close dropdown when pressing escape
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          hideProfileMenu();
        }
      });
    </script>

    <!-- Navigation Enhancement Script -->
    <script src="../navigation.js"></script>
    <script src="../auth.js"></script>
  </body>
</html>
