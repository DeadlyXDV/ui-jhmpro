<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tambah Booking Baru - JHMPRO Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "primary-blue": "#1E3A8A",
              "secondary-blue": "#3B82F6",
              "light-blue": "#EFF6FF",
              "success-green": "#10B981",
              "warning-orange": "#F59E0B",
              "danger-red": "#EF4444",
              purple: "#8B5CF6",
              "gray-primary": "#374151",
              "gray-secondary": "#6B7280",
              "gray-heading": "#1F2937",
              "gray-bg": "#F9FAFB",
            },
            fontFamily: {
              inter: ["Inter", "system-ui", "sans-serif"],
            },
          },
        },
      };
    </script>
  </head>
  <body class="font-inter bg-gray-bg">
    <!-- Sidebar Navigation -->
    <div class="flex h-screen">
      <aside
        id="sidebar"
        class="w-80 bg-gray-heading text-white transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out fixed lg:static inset-y-0 left-0 z-50"
      >
        <div
          class="flex items-center justify-between h-16 px-6 border-b border-gray-600"
        >
          <div class="flex items-center space-x-3">
            <div
              class="w-8 h-8 bg-secondary-blue rounded-lg flex items-center justify-center"
            >
              <span class="text-white font-bold text-sm">JH</span>
            </div>
            <span class="font-bold text-lg">JHMPRO Admin</span>
          </div>
          <button id="sidebar-close" class="lg:hidden text-white">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <nav class="mt-8">
          <div class="space-y-2 px-6">
            <a
              href="admin-dashboard.html"
              class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-primary transition-colors duration-200"
            >
              <i class="fas fa-tachometer-alt text-gray-400 text-lg"></i>
              <span>Dashboard</span>
            </a>
            <a
              href="admin-booking.html"
              class="flex items-center space-x-3 p-3 rounded-lg bg-gray-primary transition-colors duration-200"
            >
              <i class="fas fa-calendar-alt text-secondary-blue text-lg"></i>
              <span class="font-medium">Manajemen Booking</span>
            </a>
            <a
              href="admin-customers.html"
              class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-primary transition-colors duration-200"
            >
              <i class="fas fa-users text-gray-400 text-lg"></i>
              <span>Manajemen Pelanggan</span>
            </a>
            <a
              href="admin-services.html"
              class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-primary transition-colors duration-200"
            >
              <i class="fas fa-tools text-gray-400 text-lg"></i>
              <span>Manajemen Layanan</span>
            </a>
            <a
              href="admin-reports.html"
              class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-primary transition-colors duration-200"
            >
              <i class="fas fa-chart-bar text-gray-400 text-lg"></i>
              <span>Laporan</span>
            </a>
            <a
              href="admin-inventory.html"
              class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-primary transition-colors duration-200"
            >
              <i class="fas fa-box text-gray-400 text-lg"></i>
              <span>Inventory</span>
            </a>
            <a
              href="admin-staff.html"
              class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-primary transition-colors duration-200"
            >
              <i class="fas fa-user-tie text-gray-400 text-lg"></i>
              <span>Manajemen Staff</span>
            </a>
            <a
              href="#"
              class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-primary transition-colors duration-200"
            >
              <i class="fas fa-cog text-gray-400 text-lg"></i>
              <span>Pengaturan</span>
            </a>
          </div>

          <div class="mt-auto px-6 pb-6">
            <a
              href="#"
              onclick="logoutUser(); return false;"
              class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-primary transition-colors duration-200 text-danger-red"
            >
              <i class="fas fa-sign-out-alt text-lg"></i>
              <span>Keluar</span>
            </a>
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Top Navigation -->
        <header class="bg-white border-b border-gray-200 h-16">
          <div class="flex items-center justify-between h-full px-6">
            <div class="flex items-center space-x-4">
              <button id="sidebar-toggle" class="lg:hidden text-gray-500">
                <i class="fas fa-bars text-xl"></i>
              </button>
              <nav class="hidden sm:flex items-center space-x-2 text-sm">
                <a href="admin-dashboard.html" class="text-secondary-blue"
                  >Dashboard</a
                >
                <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
                <a href="admin-booking.html" class="text-secondary-blue"
                  >Manajemen Booking</a
                >
                <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
                <span class="text-gray-secondary">Tambah Booking</span>
              </nav>
            </div>

            <div class="flex items-center space-x-4">
              <button
                class="relative p-2 text-gray-500 hover:text-gray-primary"
              >
                <i class="fas fa-bell text-lg"></i>
                <span
                  class="absolute -top-1 -right-1 w-3 h-3 bg-danger-red rounded-full"
                ></span>
              </button>
              <div class="flex items-center space-x-3">
                <img
                  src="https://via.placeholder.com/32x32"
                  alt="Admin"
                  class="w-8 h-8 rounded-full"
                />
                <span class="text-sm font-medium text-gray-primary"
                  >Admin User</span
                >
                <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
              </div>
            </div>
          </div>
        </header>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto p-6">
          <!-- Page Header -->
          <div class="mb-8">
            <div class="flex items-center justify-between">
              <div>
                <h1 class="text-2xl font-semibold text-gray-heading mb-2">
                  Tambah Booking Baru
                </h1>
                <p class="text-gray-secondary">
                  Buat booking servis baru untuk pelanggan
                </p>
              </div>
              <a
                href="admin-booking.html"
                class="flex items-center space-x-2 px-4 py-2 text-sm bg-gray-100 text-gray-primary rounded-lg hover:bg-gray-200 transition-colors duration-200"
              >
                <i class="fas fa-arrow-left"></i>
                <span>Kembali</span>
              </a>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Main Form -->
            <div class="lg:col-span-2">
              <!-- Customer Information -->
              <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                <h2 class="text-lg font-semibold text-gray-heading mb-6">
                  <i class="fas fa-user text-secondary-blue mr-2"></i>
                  Informasi Pelanggan
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Nama Lengkap *
                    </label>
                    <input
                      type="text"
                      id="customer-name"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                      placeholder="Masukkan nama lengkap"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Email *
                    </label>
                    <input
                      type="email"
                      id="customer-email"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                      placeholder="email@example.com"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Nomor Telepon *
                    </label>
                    <input
                      type="tel"
                      id="customer-phone"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                      placeholder="+62 812 3456 7890"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Tipe Pelanggan
                    </label>
                    <select
                      id="customer-type"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                    >
                      <option value="new">Pelanggan Baru</option>
                      <option value="existing">Pelanggan Lama</option>
                    </select>
                  </div>
                </div>

                <div class="mt-6">
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Alamat
                  </label>
                  <textarea
                    id="customer-address"
                    rows="3"
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                    placeholder="Alamat lengkap pelanggan"
                  ></textarea>
                </div>
              </div>

              <!-- Vehicle Information -->
              <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                <h2 class="text-lg font-semibold text-gray-heading mb-6">
                  <i class="fas fa-car text-secondary-blue mr-2"></i>
                  Detail Kendaraan
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Jenis Kendaraan *
                    </label>
                    <select
                      id="vehicle-type"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                    >
                      <option value="">Pilih jenis kendaraan</option>
                      <option value="mobil">Mobil</option>
                      <option value="motor">Motor</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Merk *
                    </label>
                    <input
                      type="text"
                      id="vehicle-brand"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                      placeholder="Honda, Toyota, Yamaha, dll"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Model *
                    </label>
                    <input
                      type="text"
                      id="vehicle-model"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                      placeholder="Civic, Avanza, NMAX, dll"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Tahun
                    </label>
                    <input
                      type="number"
                      id="vehicle-year"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                      placeholder="2020"
                      min="1990"
                      max="2025"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Nomor Polisi *
                    </label>
                    <input
                      type="text"
                      id="vehicle-plate"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                      placeholder="B 1234 XYZ"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Kilometer
                    </label>
                    <input
                      type="number"
                      id="vehicle-mileage"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                      placeholder="45000"
                    />
                  </div>
                </div>
              </div>

              <!-- Service & Schedule -->
              <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                <h2 class="text-lg font-semibold text-gray-heading mb-6">
                  <i class="fas fa-wrench text-secondary-blue mr-2"></i>
                  Layanan & Jadwal
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Pilih Layanan *
                    </label>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                      <label
                        class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer"
                      >
                        <input
                          type="checkbox"
                          class="rounded border-gray-300"
                          value="servis-rutin"
                          data-price="150000"
                        />
                        <div>
                          <p class="font-medium text-gray-heading">
                            Servis Rutin
                          </p>
                          <p class="text-sm text-gray-secondary">Rp 150.000</p>
                        </div>
                      </label>
                      <label
                        class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer"
                      >
                        <input
                          type="checkbox"
                          class="rounded border-gray-300"
                          value="ganti-oli"
                          data-price="200000"
                        />
                        <div>
                          <p class="font-medium text-gray-heading">Ganti Oli</p>
                          <p class="text-sm text-gray-secondary">Rp 200.000</p>
                        </div>
                      </label>
                      <label
                        class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer"
                      >
                        <input
                          type="checkbox"
                          class="rounded border-gray-300"
                          value="tune-up"
                          data-price="250000"
                        />
                        <div>
                          <p class="font-medium text-gray-heading">Tune Up</p>
                          <p class="text-sm text-gray-secondary">Rp 250.000</p>
                        </div>
                      </label>
                      <label
                        class="flex items-center space-x-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer"
                      >
                        <input
                          type="checkbox"
                          class="rounded border-gray-300"
                          value="servis-ac"
                          data-price="100000"
                        />
                        <div>
                          <p class="font-medium text-gray-heading">Servis AC</p>
                          <p class="text-sm text-gray-secondary">Rp 100.000</p>
                        </div>
                      </label>
                    </div>
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Tanggal *
                    </label>
                    <input
                      type="date"
                      id="service-date"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Waktu *
                    </label>
                    <select
                      id="service-time"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                    >
                      <option value="">Pilih waktu</option>
                      <option value="08:00">08:00 WIB</option>
                      <option value="09:00">09:00 WIB</option>
                      <option value="10:00">10:00 WIB</option>
                      <option value="11:00">11:00 WIB</option>
                      <option value="13:00">13:00 WIB</option>
                      <option value="14:00">14:00 WIB</option>
                      <option value="15:00">15:00 WIB</option>
                      <option value="16:00">16:00 WIB</option>
                    </select>
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Teknisi
                    </label>
                    <select
                      id="technician"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                    >
                      <option value="">Auto-assign berdasarkan jadwal</option>
                      <option value="agus">Agus Santoso</option>
                      <option value="budi">Budi Wahyono</option>
                      <option value="charlie">Charlie Indra</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      Bay
                    </label>
                    <select
                      id="service-bay"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                    >
                      <option value="">
                        Auto-assign berdasarkan ketersediaan
                      </option>
                      <option value="bay1">Bay 1</option>
                      <option value="bay2">Bay 2</option>
                      <option value="bay3">Bay 3</option>
                      <option value="bay4">Bay 4</option>
                    </select>
                  </div>
                </div>

                <div class="mt-6">
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Catatan Tambahan
                  </label>
                  <textarea
                    id="service-notes"
                    rows="3"
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary-blue focus:border-transparent"
                    placeholder="Keluhan atau catatan khusus dari pelanggan..."
                  ></textarea>
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="flex items-center justify-end space-x-4">
                <a
                  href="admin-booking.html"
                  class="px-6 py-2 border border-gray-300 text-gray-primary rounded-lg hover:bg-gray-50 transition-colors duration-200"
                >
                  Batal
                </a>
                <button
                  id="submit-btn"
                  class="px-6 py-2 bg-success-green text-white rounded-lg hover:bg-green-600 transition-colors duration-200"
                >
                  <i class="fas fa-save mr-2"></i>Simpan Booking
                </button>
              </div>
            </div>

            <!-- Summary Sidebar -->
            <div class="lg:col-span-1">
              <div class="bg-white rounded-xl shadow-sm p-6 sticky top-6">
                <h3 class="text-lg font-semibold text-gray-heading mb-6">
                  Ringkasan Booking
                </h3>

                <!-- Customer Summary -->
                <div class="mb-6">
                  <h4 class="text-sm font-medium text-gray-700 mb-3">
                    Informasi Pelanggan
                  </h4>
                  <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                      <span class="text-gray-secondary">Nama:</span>
                      <span id="summary-name" class="text-gray-heading">-</span>
                    </div>
                    <div class="flex justify-between">
                      <span class="text-gray-secondary">Email:</span>
                      <span id="summary-email" class="text-gray-heading"
                        >-</span
                      >
                    </div>
                    <div class="flex justify-between">
                      <span class="text-gray-secondary">Telepon:</span>
                      <span id="summary-phone" class="text-gray-heading"
                        >-</span
                      >
                    </div>
                  </div>
                </div>

                <!-- Vehicle Summary -->
                <div class="mb-6">
                  <h4 class="text-sm font-medium text-gray-700 mb-3">
                    Kendaraan
                  </h4>
                  <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                      <span class="text-gray-secondary">Kendaraan:</span>
                      <span id="summary-vehicle" class="text-gray-heading"
                        >-</span
                      >
                    </div>
                    <div class="flex justify-between">
                      <span class="text-gray-secondary">Plat:</span>
                      <span id="summary-plate" class="text-gray-heading"
                        >-</span
                      >
                    </div>
                  </div>
                </div>

                <!-- Service Summary -->
                <div class="mb-6">
                  <h4 class="text-sm font-medium text-gray-700 mb-3">
                    Layanan & Jadwal
                  </h4>
                  <div class="space-y-2 text-sm">
                    <div>
                      <span class="text-gray-secondary">Layanan:</span>
                      <div id="summary-services" class="mt-1 text-gray-heading">
                        -
                      </div>
                    </div>
                    <div class="flex justify-between">
                      <span class="text-gray-secondary">Tanggal:</span>
                      <span id="summary-date" class="text-gray-heading">-</span>
                    </div>
                    <div class="flex justify-between">
                      <span class="text-gray-secondary">Waktu:</span>
                      <span id="summary-time" class="text-gray-heading">-</span>
                    </div>
                  </div>
                </div>

                <div class="border-t border-gray-200 pt-4">
                  <div
                    class="flex justify-between items-center text-lg font-semibold"
                  >
                    <span class="text-gray-heading">Total:</span>
                    <span id="summary-total" class="text-primary-blue"
                      >Rp 0</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Sidebar Overlay for Mobile -->
    <div
      id="sidebar-overlay"
      class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden hidden"
    ></div>

    <script>
      // Sidebar toggle functionality
      const sidebarToggle = document.getElementById("sidebar-toggle");
      const sidebarClose = document.getElementById("sidebar-close");
      const sidebar = document.getElementById("sidebar");
      const sidebarOverlay = document.getElementById("sidebar-overlay");

      function showSidebar() {
        sidebar.classList.remove("-translate-x-full");
        sidebarOverlay.classList.remove("hidden");
      }

      function hideSidebar() {
        sidebar.classList.add("-translate-x-full");
        sidebarOverlay.classList.add("hidden");
      }

      sidebarToggle.addEventListener("click", showSidebar);
      sidebarClose.addEventListener("click", hideSidebar);
      sidebarOverlay.addEventListener("click", hideSidebar);

      // Form submission functionality
      const submitBtn = document.getElementById("submit-btn");

      function validateForm() {
        const name = document.getElementById("customer-name").value;
        const email = document.getElementById("customer-email").value;
        const phone = document.getElementById("customer-phone").value;
        const vehicleType = document.getElementById("vehicle-type").value;
        const vehicleBrand = document.getElementById("vehicle-brand").value;
        const vehicleModel = document.getElementById("vehicle-model").value;
        const vehiclePlate = document.getElementById("vehicle-plate").value;
        const serviceDate = document.getElementById("service-date").value;
        const serviceTime = document.getElementById("service-time").value;
        const services = document.querySelectorAll(
          'input[type="checkbox"]:checked'
        );

        return (
          name &&
          email &&
          phone &&
          vehicleType &&
          vehicleBrand &&
          vehicleModel &&
          vehiclePlate &&
          serviceDate &&
          serviceTime &&
          services.length > 0
        );
      }

      submitBtn.addEventListener("click", () => {
        if (validateForm()) {
          alert("Booking berhasil disimpan!");
          window.location.href = "admin-booking.html";
        } else {
          alert("Mohon lengkapi semua field yang wajib diisi!");
        }
      });

      // Real-time summary updates
      function updateSummary() {
        // Customer info
        document.getElementById("summary-name").textContent =
          document.getElementById("customer-name").value || "-";
        document.getElementById("summary-email").textContent =
          document.getElementById("customer-email").value || "-";
        document.getElementById("summary-phone").textContent =
          document.getElementById("customer-phone").value || "-";

        // Vehicle info
        const brand = document.getElementById("vehicle-brand").value;
        const model = document.getElementById("vehicle-model").value;
        const year = document.getElementById("vehicle-year").value;
        const vehicle =
          brand && model ? `${brand} ${model} ${year || ""}`.trim() : "-";
        document.getElementById("summary-vehicle").textContent = vehicle;
        document.getElementById("summary-plate").textContent =
          document.getElementById("vehicle-plate").value || "-";

        // Service info
        const checkedServices = document.querySelectorAll(
          'input[type="checkbox"]:checked'
        );
        const servicesList = Array.from(checkedServices).map((cb) => {
          const label = cb.closest("label");
          const name = label.querySelector("p.font-medium").textContent;
          const price = label.querySelector("p.text-sm").textContent;
          return { name, price };
        });

        if (servicesList.length > 0) {
          const servicesHtml = servicesList
            .map(
              (service) =>
                `<div class="flex justify-between"><span>${service.name}</span><span>${service.price}</span></div>`
            )
            .join("");
          document.getElementById("summary-services").innerHTML = servicesHtml;

          // Calculate total
          const total = servicesList.reduce((sum, service) => {
            const price = parseInt(service.price.replace(/[^0-9]/g, ""));
            return sum + price;
          }, 0);
          document.getElementById(
            "summary-total"
          ).textContent = `Rp ${total.toLocaleString("id-ID")}`;
        } else {
          document.getElementById("summary-services").textContent = "-";
          document.getElementById("summary-total").textContent = "Rp 0";
        }

        document.getElementById("summary-date").textContent =
          document.getElementById("service-date").value || "-";
        document.getElementById("summary-time").textContent =
          document.getElementById("service-time").value
            ? document.getElementById("service-time").value + " WIB"
            : "-";
      }

      // Add event listeners for real-time updates
      document.addEventListener("input", updateSummary);
      document.addEventListener("change", updateSummary);

      // Initialize summary
      updateSummary();
    </script>
    <script src="../navigation.js"></script>
    <script src="../auth.js"></script>

    <script>
      // Check authentication on page load
      document.addEventListener("DOMContentLoaded", function () {
        if (!RouteProtection.requireAuth("../login.html")) {
          return;
        }
        RouteProtection.requireRole("admin", "../index.html");
      });
    </script>
  </body>
</html>
